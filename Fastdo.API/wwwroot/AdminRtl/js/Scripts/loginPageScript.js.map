{"version":3,"file":"loginPageScript.js","sourceRoot":"","sources":["loginPageScript.ts"],"names":[],"mappings":"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","sourcesContent":["\n(function () {\n    let operations = {\n        _loginUrl: \"/api/admin/auth/signin\",\n        loginForm: $('#login-form'),\n        generalErrorEL: $('#generalError'),\n        loginBtnSubmit: $('#loginBtnSubmit'),\n        userNameInpt: $('#userNameInpt'),\n        passwordInpt: $('#passwordInpt'),\n        PostedFormOfSignIn: $('#PostedFormOfSignIn'),\n        setCustomHtml5InputsRequiredTitle() {\n            document.addEventListener(\"DOMContentLoaded\", function () {\n                var elements = document.getElementsByTagName(\"INPUT\");\n                for (var i = 0; i < elements.length; i++) {\n                    (elements[i] as any).oninvalid = function (e: any) {\n                        e.target.setCustomValidity(\"\");\n                        if (!e.target.validity.valid) {\n                            e.target.setCustomValidity((e.target as HTMLInputElement).getAttribute('title'));\n                        }\n                    };\n                    (elements[i] as any).oninput = function (e: any) {\n                        e.target.setCustomValidity(\"\");\n                    };\n                }\n            })\n        },\n        initWork() {\n            $.ajaxSettings.contentType = \"application/json\";\n            $('.login-content [data-toggle=\"flip\"]').click(function () {\n                $('.login-box').toggleClass('flipped');\n                return false;\n            });\n            $('#rememberMeInpt').click(function (e) {\n                var _this = $(this);\n                if (_this.val() == \"false\")\n                    _this.val(\"true\");\n                else\n                    _this.val(\"false\")\n            });\n            this.setCustomHtml5InputsRequiredTitle();\n        },\n        getErrorsContainer(errors: string[]) {\n            if (errors.length == 0) return $(document.createElement('span'));\n            else if (errors.length == 1) {\n                var el = document.createElement('span');\n                el.textContent = errors[0];\n                return $(el);\n            }\n            else {\n                var container = document.createDocumentFragment();\n                for (let error of errors) {\n                    var el = document.createElement('span');\n                    el.textContent = error;\n                    container.appendChild(el);\n                }\n                return $(container)\n            }\n        },\n        SignInPost(model: any, rememberMe: string) {\n\n            const { id, name, userName, phoneNumber, prevligs } = model;\n            $('#PostSign_Id').val(id);\n            $('#PostSign_Name').val(name);\n            $('#PostSign_UserName').val(userName);\n            $('#PostSign_PhoneNumber').val(phoneNumber);\n            $('#PostSign_Prevligs').val(prevligs);\n            $('#PostSign_RememberMe').val(rememberMe);\n            this.PostedFormOfSignIn.submit();\n        },\n        handleLoginForm() {\n            const _this = this;\n            this.userNameInpt.focus(e => {\n                this.generalErrorEL.text('');\n            });\n            this.passwordInpt.focus(e => {\n                this.generalErrorEL.text('');\n            })\n            this.loginForm.submit((e: any) => {\n                e.preventDefault();\n\n                let userName = this.userNameInpt.val() || \"\";\n                let password = this.passwordInpt.val() || \"\";\n                let rememberMe = $('#rememberMeInpt').val();\n                let adminType = \"Administrator\";\n                var data = JSON.stringify({\n                    adminType,\n                    userName,\n                    password\n                });\n                this.loginBtnSubmit.setLoading('fa-sign-in');\n                $.post(_this._loginUrl, data)\n                    .then(data => {\n                        const { user, accessToken: { token } } = data;\n                        this.storeUserToken(token);\n                        this.SignInPost(user, rememberMe as string);\n                    })\n                    .catch((e: any) => {\n                        var errorObj = e.responseJSON?.errors;\n                        if (errorObj) {\n                            const { G, UserName, Password } = errorObj;\n                            this.generalErrorEL.text(G);\n                            this.userNameInpt.next().append(this.getErrorsContainer(UserName as any));\n                            this.passwordInpt.next().append(this.getErrorsContainer(Password as any))\n                        }\n                    })\n                    .always(() => {\n                        this.loginBtnSubmit.removeLoading();\n                    });\n\n            })\n        },\n        storeUserToken(token: string) {\n            localStorage.setItem('token', token)\n        },\n        start() {\n            this.initWork();\n            this.handleLoginForm();\n        }\n    }\n    operations.start();\n}());"]}